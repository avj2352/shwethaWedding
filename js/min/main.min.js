!function(o){function e(){o("#canvas").fadeIn(1e3);var n=o(".magazine");return 0===n.width()||0===n.height()?(setTimeout(e,10),void 0):(n.turn({width:922,height:600,duration:1e3,gradients:!0,autoCenter:!0,elevation:50,pages:12,when:{turning:function(e,n){{var i=o(this);i.turn("page"),i.turn("pages")}Hash.go("page/"+n).update(),disableControls(n)},turned:function(e,n){disableControls(n),o(this).turn("center"),o("#slider").slider("value",getViewNumber(o(this),n)),1==n&&o(this).turn("peel","br")},missing:function(e,n){for(var i=0;i<n.length;i++)addPage(n[i],o(this))}}}),o(".magazine-viewport").zoom({flipbook:o(".magazine"),max:function(){return largeMagazineWidth()/o(".magazine").width()},when:{swipeLeft:function(){o(this).zoom("flipbook").turn("next")},swipeRight:function(){o(this).zoom("flipbook").turn("previous")},resize:function(o,e,n,i){1==e?loadSmallPage(n,i):loadLargePage(n,i)},zoomIn:function(){o("#slider-bar").hide(),o(".made").hide(),o(".magazine").removeClass("animated").addClass("zoom-in"),o(".zoom-icon").removeClass("zoom-icon-in").addClass("zoom-icon-out"),window.escTip||o.isTouch||(escTip=!0,o("<div />",{"class":"exit-message"}).html("<div>Press ESC to exit</div>").appendTo(o("body")).delay(2e3).animate({opacity:0},500,function(){o(this).remove()}))},zoomOut:function(){o("#slider-bar").fadeIn(),o(".exit-message").hide(),o(".made").fadeIn(),o(".zoom-icon").removeClass("zoom-icon-out").addClass("zoom-icon-in"),setTimeout(function(){o(".magazine").addClass("animated").removeClass("zoom-in"),resizeViewport()},0)}}}),o.isTouch?o(".magazine-viewport").bind("zoom.doubleTap",zoomTo):o(".magazine-viewport").bind("zoom.tap",zoomTo),o(document).keydown(function(e){var n=37,i=39,t=27;switch(e.keyCode){case n:o(".magazine").turn("previous"),e.preventDefault();break;case i:o(".magazine").turn("next"),e.preventDefault();break;case t:o(".magazine-viewport").zoom("zoomOut"),e.preventDefault()}}),Hash.on("^page/([0-9]*)$",{yep:function(e,n){var i=n[1];void 0!==i&&o(".magazine").turn("is")&&o(".magazine").turn("page",i)},nop:function(){o(".magazine").turn("is")&&o(".magazine").turn("page",1)}}),o(window).resize(function(){resizeViewport()}).bind("orientationchange",function(){resizeViewport()}),o(".next-button").bind(o.mouseEvents.over,function(){o(this).addClass("next-button-hover")}).bind(o.mouseEvents.out,function(){o(this).removeClass("next-button-hover")}).bind(o.mouseEvents.down,function(){o(this).addClass("next-button-down")}).bind(o.mouseEvents.up,function(){o(this).removeClass("next-button-down")}).click(function(){o(".magazine").turn("next")}),o(".previous-button").bind(o.mouseEvents.over,function(){o(this).addClass("previous-button-hover")}).bind(o.mouseEvents.out,function(){o(this).removeClass("previous-button-hover")}).bind(o.mouseEvents.down,function(){o(this).addClass("previous-button-down")}).bind(o.mouseEvents.up,function(){o(this).removeClass("previous-button-down")}).click(function(){o(".magazine").turn("previous")}),resizeViewport(),o(".magazine").addClass("animated"),void 0)}o("body").loadie(),o(".zoom-icon").bind("mouseover",function(){o(this).hasClass("zoom-icon-in")&&o(this).addClass("zoom-icon-in-hover"),o(this).hasClass("zoom-icon-out")&&o(this).addClass("zoom-icon-out-hover")}).bind("mouseout",function(){o(this).hasClass("zoom-icon-in")&&o(this).removeClass("zoom-icon-in-hover"),o(this).hasClass("zoom-icon-out")&&o(this).removeClass("zoom-icon-out-hover")}).bind("click",function(){o(this).hasClass("zoom-icon-in")?o(".magazine-viewport").zoom("zoomIn"):o(this).hasClass("zoom-icon-out")&&o(".magazine-viewport").zoom("zoomOut")}),o("#canvas").hide(),yepnope({test:Modernizr.csstransforms,yep:["lib/turn.min.js"],nope:["lib/turn.html4.min.js","css/jquery.ui.html4.css"],both:["lib/zoom.min.js","css/jquery.ui.css","js/magazine.js","css/magazine.css"],complete:e})}(jQuery);